; src\driver_led.SRC generated from: src\driver_led.c
; COMPILER INVOKED BY:
;        C:\Keil_v5\C51\BIN\C51.EXE src\driver_led.c OMF2 ROM(COMPACT) OPTIMIZE(7,SPEED) REGFILE(.\Output\traffic_light_ms51.ORC) BROWSE INCDIR(.\Library\Device\Include;.\Library\StdDriver\inc) DEBUG CODE SYMBOLS PRINT(.\LST\driver_led.lst) TABS(2) OBJECT(.\Output\driver_led.obj)

$NOMOD51

NAME	DRIVER_LED

ACC7	BIT	0E0H.7
AINDIDS	DATA	0F6H
P0M1	DATA	0B1H
RXD_1	BIT	080H.2
P1M1	DATA	0B3H
P0M2	DATA	0B2H
P0	DATA	080H
SADDR_1	DATA	0BBH
P1M2	DATA	0B4H
P1	DATA	090H
TXD_1	BIT	090H.6
AA	BIT	0C0H.2
P3M1	DATA	0ACH
P2	DATA	0A0H
P3	DATA	0B0H
P3M2	DATA	0ADH
AC	BIT	0D0H.6
WKCON	DATA	08FH
RCTRIM0	DATA	084H
EIE1	DATA	09CH
RCTRIM1	DATA	085H
EA	BIT	0A8H.7
PWMCON0	DATA	0D8H
PWMCON1	DATA	0DFH
FE	BIT	098H.7
EADC	BIT	0A8H.6
PWMPH	DATA	0D1H
IE	DATA	0A8H
CKSWT	DATA	096H
ADCF	BIT	0E8H.7
EIP1	DATA	0FEH
PWMPL	DATA	0D9H
ADCHS0	BIT	0E8H.0
TA	DATA	0C7H
ADCHS1	BIT	0E8H.1
ADCHS2	BIT	0E8H.2
ES	BIT	0A8H.4
ADCHS3	BIT	0E8H.3
I2ADDR	DATA	0C1H
PADC	BIT	0B8H.6
IP	DATA	0B8H
RI	BIT	098H.0
EBOD	BIT	0A8H.5
SI	BIT	0C0H.3
CY	BIT	0D0H.7
ADCS	BIT	0E8H.6
FE_1	BIT	0F8H.7
TI	BIT	098H.1
LOAD	BIT	0D8H.6
CKEN	DATA	097H
PS	BIT	0B8H.4
SP	DATA	081H
OV	BIT	0D0H.2
PWMINTC	DATA	0B7H
PBOD	BIT	0B8H.5
P0SR	DATA	0B2H
EIPH	DATA	0F7H
P1SR	DATA	0B4H
P3SR	DATA	0ADH
RI_1	BIT	0F8H.0
TI_1	BIT	0F8H.1
RCMP2H	DATA	0CBH
ADCMPH	DATA	0CFH
P00	BIT	080H.0
P01	BIT	080H.1
P10	BIT	090H.0
PMEN	DATA	0FBH
SBUF	DATA	099H
PCON	DATA	087H
P02	BIT	080H.2
P11	BIT	090H.1
P20	BIT	0A0H.0
RCMP2L	DATA	0CAH
P03	BIT	080H.3
P12	BIT	090H.2
P30	BIT	0B0H.0
ADCDLY	DATA	0E3H
ADCMPL	DATA	0CEH
P04	BIT	080H.4
P13	BIT	090H.3
SCON	DATA	098H
P05	BIT	080H.5
P14	BIT	090H.4
TMOD	DATA	089H
TCON	DATA	088H
P06	BIT	080H.6
P15	BIT	090H.5
P07	BIT	080H.7
P16	BIT	090H.6
P17	BIT	090H.7
MOSI	BIT	080H.0
MISO	BIT	080H.1
SPCR	DATA	0F3H
I2STAT	DATA	0BDH
SPDR	DATA	0F5H
PWMF	BIT	0D8H.5
C0H	DATA	0E5H
C1H	DATA	0E7H
C2H	DATA	0EEH
CHPCON	DATA	09FH
IE0	BIT	088H.1
IE1	BIT	088H.3
C0L	DATA	0E4H
SFRS	DATA	091H
C1L	DATA	0E6H
CM_RL2	BIT	0C8H.0
B	DATA	0F0H
C2L	DATA	0EDH
SBUF_1	DATA	09AH
IAPUEN	DATA	0A5H
SCON_1	DATA	0F8H
ACC	DATA	0E0H
ET0	BIT	0A8H.1
SPSR	DATA	0F4H
IAPTRG	DATA	0A4H
TF0	BIT	088H.5
ET1	BIT	0A8H.3
TF1	BIT	088H.7
RB8	BIT	098H.2
TF2	BIT	0C8H.7
FBD	DATA	0D7H
TH0	DATA	08CH
IT0	BIT	088H.0
EX0	BIT	0A8H.0
RH3	DATA	0C6H
TH1	DATA	08DH
IT1	BIT	088H.2
TB8	BIT	098H.3
EX1	BIT	0A8H.2
TH2	DATA	0CDH
P	BIT	0D0H.0
PDTCNT	DATA	0FAH
SM0	BIT	098H.7
TL0	DATA	08AH
SM1	BIT	098H.6
RL3	DATA	0C5H
TL1	DATA	08BH
SM2	BIT	098H.5
I2CEN	BIT	0C0H.6
TL2	DATA	0CCH
P0S	DATA	0B1H
EIE	DATA	09BH
PT0	BIT	0B8H.1
P1S	DATA	0B3H
PT1	BIT	0B8H.3
RS0	BIT	0D0H.3
I2DAT	DATA	0BCH
P2S	DATA	0B5H
TR0	BIT	088H.4
RS1	BIT	0D0H.4
I2CLK	DATA	0BEH
P3S	DATA	0ACH
TR1	BIT	088H.6
CLRPWM	BIT	0D8H.4
SDA	BIT	090H.4
PX0	BIT	0B8H.0
TR2	BIT	0C8H.2
EIPH1	DATA	0FFH
PX1	BIT	0B8H.2
ADCCON0	DATA	0E8H
ADCCON1	DATA	0E1H
ADCCON2	DATA	0E2H
I2CON	DATA	0C0H
DPH	DATA	083H
RB8_1	BIT	0F8H.2
EIP	DATA	0EFH
TB8_1	BIT	0F8H.3
PIF	DATA	0ECH
DPL	DATA	082H
SM0_1	BIT	0F8H.7
PMD	DATA	0FCH
IPH	DATA	0B7H
SCL	BIT	090H.3
SM1_1	BIT	0F8H.6
I2TOC	DATA	0BFH
SM2_1	BIT	0F8H.5
ADCRH	DATA	0C3H
IAPAH	DATA	0A7H
REN	BIT	098H.4
IAPFD	DATA	0AEH
CAPCON0	DATA	092H
I2CPX	BIT	0C0H.0
T2MOD	DATA	0C9H
T2CON	DATA	0C8H
ADCRL	DATA	0C2H
BODCON0	DATA	0A3H
CAPCON1	DATA	093H
STA	BIT	0C0H.5
T3CON	DATA	0C4H
BODCON1	DATA	0ABH
IAPAL	DATA	0A6H
CAPCON2	DATA	094H
CAPCON3	DATA	0F1H
CAPCON4	DATA	0F2H
PWMRUN	BIT	0D8H.7
SPCR2	DATA	0F3H
SADEN	DATA	0B9H
IAPCN	DATA	0AFH
PWM0H	DATA	0D2H
RXD	BIT	080H.7
PNP	DATA	0D6H
PWM1H	DATA	0D3H
PWM2H	DATA	0D4H
SADDR	DATA	0A9H
CKCON	DATA	08EH
STADC	BIT	080H.4
TXD	BIT	080H.6
PWM3H	DATA	0D5H
PWM0L	DATA	0DAH
PWM4H	DATA	0C4H
PWM1L	DATA	0DBH
PWM5H	DATA	0C5H
AUXR1	DATA	0A2H
CKDIV	DATA	095H
PWM2L	DATA	0DCH
PWM3L	DATA	0DDH
RWK	DATA	086H
F0	BIT	0D0H.5
PWM4L	DATA	0CCH
STO	BIT	0C0H.4
ETGSEL0	BIT	0E8H.4
REN_1	BIT	0F8H.4
PWM5L	DATA	0CDH
ACC0	BIT	0E0H.0
ETGSEL1	BIT	0E8H.5
ACC1	BIT	0E0H.1
ACC2	BIT	0E0H.2
ACC3	BIT	0E0H.3
PICON	DATA	0E9H
PIOCON0	DATA	0DEH
PSW	DATA	0D0H
ACC4	BIT	0E0H.4
PINEN	DATA	0EAH
PIOCON1	DATA	0C6H
ACC5	BIT	0E0H.5
PDTEN	DATA	0F9H
WDCON	DATA	0AAH
ACC6	BIT	0E0H.6
PIPEN	DATA	0EBH
SADEN_1	DATA	0BAH
?PR?_drvLed1Byte?DRIVER_LED              SEGMENT CODE INBLOCK 
?DT?_drvLed1Byte?DRIVER_LED              SEGMENT DATA OVERLAYABLE
	PUBLIC	_drvLed1Byte

	RSEG  ?DT?_drvLed1Byte?DRIVER_LED
?_drvLed1Byte?BYTE:
        val?040:   DS   1
; #pragma SRC
; 
; #include "MS51_16K.H"
; 
; sbit ACC0 = ACC^0;
; sbit ACC1 = ACC^1;
; sbit ACC2 = ACC^2;
; sbit ACC3 = ACC^3;
; sbit ACC4 = ACC^4;
; sbit ACC5 = ACC^5;
; sbit ACC6 = ACC^6;
; sbit ACC7 = ACC^7;
; 
; /*
; bit length: 1250ns @ 24MHz => 30cyc
; BIT High 1: 750ns @ 24MHz => 18cyc(-12)
; BIT Low  1: 330ns @ 24MHz => 8cyc(-22)
; */
; void drvLed1Byte(uint8_t val)

	RSEG  ?PR?_drvLed1Byte?DRIVER_LED
_drvLed1Byte:
	USING	0
			; SOURCE LINE # 19
	MOV  	val?040,R7
; {
			; SOURCE LINE # 20
; #pragma ASM
; 	WAIT_CYC MACRO X
	  WAIT_CYC MACRO X
; 		REPT X
	  REPT X
; 			NOP
	  NOP
; 		ENDM
	  ENDM
; 	ENDM
	  ENDM
; 	
	  
; 	EMIT_BIT MACRO X, Y
	  EMIT_BIT MACRO X, Y
; 		bit&X:
	  bit&X:
; 			SETB P0.0							
	  SETB P0.0							
; 			//WAIT_CYC 1								//BH=3,BL=3
	  
; 			JNB ACC.&X, bit&X&_snd0		//BH+5=8,BL+5=8
	  JNB ACC.&X, bit&X&_snd0		 
; 			bit&X&_snd1:
	  bit&X&_snd1:
; 				WAIT_CYC 10							//BH+8=18
	  WAIT_CYC 10							 
; 				CLR P0.0								//BH+4=22
	  CLR P0.0								 
; 				WAIT_CYC 5							//BH+5=27
	  WAIT_CYC 5							 
; 				SJMP bit&Y							//BH+3=30
	  SJMP bit&Y							 
; 			bit&X&_snd0:
	  bit&X&_snd0:
; 				CLR P0.0								//BL+4=12
	  CLR P0.0								 
; 				WAIT_CYC 18							//BL+18=30
	  WAIT_CYC 18							 
; 	ENDM
	  ENDM
; 	
	  
; 	EMIT_BIT_LAST MACRO X, Y
	  EMIT_BIT_LAST MACRO X, Y
; 		bit&X:
	  bit&X:
; 			SETB P0.0							
	  SETB P0.0							
; 			//WAIT_CYC 1								//BH=3,BL=3
	  
; 			JNB ACC.&X, bit&X&_snd0		//BH+5=8,BL+5=8
	  JNB ACC.&X, bit&X&_snd0		 
; 			bit&X&_snd1:
	  bit&X&_snd1:
; 				WAIT_CYC 11							//BH+8=18
	  WAIT_CYC 11							 
; 				CLR P0.0								//BH+4=22
	  CLR P0.0								 
; 				//WAIT_CYC 5							//BH+5=27
	  
; 				SJMP bit&Y							//BH+3=30
	  SJMP bit&Y							 
; 			bit&X&_snd0:
	  bit&X&_snd0:
; 				CLR P0.0								//BL+4=12
	  CLR P0.0								 
; 				WAIT_CYC 5							//BL+18=30
	  WAIT_CYC 5							 
; 	ENDM
	  ENDM
; 	
	  
; 	MOV ACC, r7
	  MOV ACC, r7
; 	
	  
; 	EMIT_BIT 7, 6
	  EMIT_BIT 7, 6
; 	EMIT_BIT 6, 5
	  EMIT_BIT 6, 5
; 	EMIT_BIT 5, 4
	  EMIT_BIT 5, 4
; 	EMIT_BIT 4, 3
	  EMIT_BIT 4, 3
; 	EMIT_BIT 3, 2
	  EMIT_BIT 3, 2
; 	EMIT_BIT 2, 1
	  EMIT_BIT 2, 1
; 	EMIT_BIT 1, 0
	  EMIT_BIT 1, 0
; 	EMIT_BIT_LAST 0, _end
	  EMIT_BIT_LAST 0, _end
; 	bit_end:
	  bit_end:
; #pragma ENDASM
; }
			; SOURCE LINE # 70
	RET  	
; END OF _drvLed1Byte

	END
